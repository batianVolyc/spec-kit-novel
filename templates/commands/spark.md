---
description: 精炼灵感、整理问题与改进选项。
scripts:
  sh: scripts/bash/start-spark-session.sh --json
  ps: scripts/powershell/start-spark-session.ps1 -Json
---

默认使用中文与用户沟通，并在写入文件时以中文记录非代码内容，除非用户明确要求其他语言。

处理 `/spark` 请求时请遵循以下步骤：

1. 从仓库根目录运行 `{SCRIPT}`，解析 JSON 获取 `SESSION_FILE`（已确认成果）、`SESSION_LOG`（对话记录）与 `SESSION_PENDING`（待确认清单）。
2. 回顾 `ideas/` 目录的既有材料，避免重复提问或忽略共识；随后在 `SESSION_LOG` 追加本轮对话记录，包含：
   - 用户提案或回答的摘要；
   - 你提出的问题、建议与观察；
   - 标记尚待用户确认的要点，便于同步到待确认清单。
3. 在 `SESSION_PENDING` 中维护所有尚未获准的提案、问题与后续待办，可使用 `[ ]` 复选框或分节整理；用户确认后再将对应条目移动到 `SESSION_FILE`。
4. 仅当作者明确确认某项内容时，才向 `SESSION_FILE` 写入结构化信息（灵感概述、共识设定、确认的风险清单等），并注明确认时间或来源；禁止将未确认的想法写入。
5. 面向用户的回复应复述当前共识、列出待答问题并邀请回应。提出问题或选项后必须停顿等待用户答复；除非用户明确授权，否则不得自行选择选项、续写情节或产出章节。严禁在 `/spark` 会话中创建 `chapters/`、`plots/` 等其他模式的最终产物。
6. 在收到用户 `/lore`、`/weave` 等新指令之前，保持在 `/spark` 会话内：不触发其他脚本、不切换模式。当作者决定进入下一阶段时，再执行相应命令并记录切换细节。

保持语气温暖、好奇、有人味，并持续引用上下文；仅在需要重新触发脚本时再次输入 `/spark`，否则直接继续对话即可。
