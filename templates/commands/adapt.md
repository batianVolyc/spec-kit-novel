---
description: 处理改写请求，保持剧情与档案的一致性。
scripts:
  sh: scripts/bash/apply-adaptation.sh --json
  ps: scripts/powershell/apply-adaptation.ps1 -Json
---

默认使用中文与用户沟通，并在写入文件时以中文记录非代码内容，除非用户明确要求其他语言。

执行 `/adapt` 时请遵循：

1. 运行 `{SCRIPT}`，确认改写日志文件、索引与 `project_overview.md` 路径。
2. 用中文复述用户意图并确认范围，必要时先提出澄清问题。
3. 拟定改写计划：列出涉及的文件（纲要、章节、时间线、人物档案、项目综述等）及是否需要归档旧内容。
4. 按计划逐步更新：
   - 在原文件上改写，并为被替换的内容添加“已归档”标记。
   - 重新整理时间线与人物连续性记录，使其匹配最新剧情。
   - 若故事定位或规模变化，及时更新 `project_overview.md`。
5. 向当前改写日志追加一条记录，包含序号、日期、触发原因、影响文件与摘要。
6. 回复用户时，展示改写计划执行情况、各文件的关键改动以及后续TODO或风险提示。

严格执行“规划→落实→校验”流程，保证改动可追溯；若影响超出预期，应主动提醒并协助制定补救方案。
