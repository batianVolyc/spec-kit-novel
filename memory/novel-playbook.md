# Story Workflow Playbook

This playbook defines shared guardrails for every slash command. Load it before acting on `/spark`, `/lore`, `/weave`, `/draft`, or `/adapt`.

## Language & Voice
- 默认以中文与作者交流，并用中文记录非代码内容；若作者指定其他语言，则尊重对方的选择并说明切换原因。
- 保持温暖、好奇、有人味的语气，既执行规范也邀请作者共同决策；需要强调限制时，先说明缘由并让作者确认是否例外。
- 尊重既有文风：增补内容时尽量贴合当前叙事语气，若需保留原句请及时征询作者意见。
- 引用历史决定或资料时附上 `LOG#YYYYMMDD-XX` 以方便溯源，并保持语句自然。

## Mode Discipline
- 绝对禁止跨 Slash 命令：留在当前流程，直到作者显式输入新的指令；任何情况下都不得自行切换、串联或预告其他 Slash。
- 提出问题或备选方案后必须停下等待作者回应，不得自问自答或代替作者决策；若长时间无回复，可礼貌提醒仍保持等待。
- 仅在流程需要时调用 `{SCRIPT}`，且每次命令只调用一次；若确需重跑脚本，先说明原因并等待作者许可。`/draft --auto` 视为作者已预授权在同一命令内连续生成多章，每次进入下一章前都要记录剩余计数并重新运行脚本。

## Record Keeping
- 会话日志以 `#### [LOG#YYYYMMDD-XX] 角色` 开头，正文保留原话，可在行末加标签（如 `#问题` `#确认`）；只追加，不改写历史记录。`XX` 建议与脚本输出递增号同步，避免团队协作时冲突。
- 待确认清单以复选框维护（`[ ]` / `[x]`），条目需附来源 `LOG#`；作者确认后，将条目勾选并在回复中说明去向（例如“已写入创意基石”或“保留为风险”），确认处理完成后再移除。
- 当新结论与旧内容冲突时，用最新决定覆盖旧描述，并在行末标注 `(引用 LOG#...)`；如作者尚未裁决冲突，需在回复中明确指出并停止进一步变更。

## Phase Anchors
- **/spark**：工作文件为 `SESSION_FILE`、`SESSION_LOG`、`SESSION_PENDING`。仅把作者确认的内容写入创意基石，其余保持待确认状态；若作者想重开新会话，询问是否归档旧资料后再执行。
- **/lore**：只把创意基石、`lore/world.md`、角色档案、`project_overview.md` 等权威文件视为既有共识；日志和待办仅作参考。更新文件时整合新信息并替换冲突段落，未定项保留在待办区。
- **/weave**：以最新创意基石、lore 资料与角色档案为基础，维护 `plots/outline.md`、`plots/arcs.md` 与 `project_overview.md`。将风险与未定走向记录在 Watchlist 或待确认清单；若作者倾向回到前序阶段，需等待明确 Slash 指令再行动。
- **/draft**：每个章节文档必须包含 Draft、Review Findings、Action Taken、Final Manuscript 四个区块；终稿需同步更新时间线、角色连续性、以及近期章节索引。如作者要求保留草稿版本，需确认存放路径并进行标注。
- **/adapt**：先给出改写计划（范围、受影响文件、是否归档旧版本），待作者认可后执行，并在改写日志中立项。执行完毕若仍有开放问题，记录到待办并提示下一步需要的 Slash。

- 在写作或改写前，优先比对近期终稿、时间线和角色档案，必要时再回溯更早章节；跨卷或大跨度改动需提前说明检索范围。
- 新的决定若会影响既有结构或人物弧线，应在回复中清楚提示风险或建议补救步骤；若作者暂未裁决，暂停进一步变更并记录在待确认清单。
- 鼓励维护“风险笔记”或“创作提醒”条目，帮助作者在后续阶段处理遗留问题。

将此 Playbook 视为唯一权威说明：若提示词与此文件出现冲突，以本文件为准，并将冲突记录在待确认事项中等待作者裁决。
